## Node Package Manager ï¼ˆNPM)

nodeåŒ…ç®¡ç†å·¥å…· å®ƒåŸºæœ¬æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· ä¹Ÿæ˜¯ç¬¬ä¸‰æ–¹åº“æ³¨å†Œåˆ°nodeçš„æ³¨å†Œæœºï¼Œæ— è®ºä½ æƒ³å‘nodeæ·»åŠ ä»€ä¹ˆåŠŸèƒ½ï¼Œå¾ˆå¯èƒ½åœ¨æ³¨å†Œåº“ä¸­å·²ç»æœ‰ç¬¬ä¸‰æ–¹çš„å…è´¹æ¨¡å—æˆ–è€…åŒ…äº†ï¼Œnpmä¼´éšç€nodeè€Œæ¥ï¼Œå¦‚æœä½ å®‰è£…äº†nodeå°±ä¹ŸåŒæ—¶å®‰è£…äº†npm,ä½†è¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºæ˜¯å„è‡ªç‹¬ç«‹å¼€å‘çš„

```bash
$ npm -v
```

## Package.jsonæ–‡ä»¶

åœ¨ä½ å‘nodeæ·»åŠ ä»»ä½•åŒ…ä¹‹å‰ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯package.jsonï¼Œè¿™ä¸ªæ–‡ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†ä½ çš„åº”ç”¨ç¨‹åºçš„æœ€åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚åå­—ã€ç‰ˆæœ¬ã€ä½œè€…ã€ä¾èµ–å…³ç³»ç­‰ï¼Œä¹Ÿå°±æ˜¯ä½ åº”ç”¨çš„ä¸€å †åŸºæœ¬ä¿¡æ¯ï¼Œæ‰€æœ‰nodeçš„åº”ç”¨éƒ½æœ‰è¿™ä¸ªjsonæ–‡ä»¶ï¼Œä¸ºäº†åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬è¿è¡Œ

```bash
$ cd é¡¹ç›®æ–‡ä»¶å¤¹
$ npm init --yes
```

## å®‰è£…ä¸€ä¸ªnodeåŒ…

https://www.npmjs.com/ æŸ¥çœ‹æƒ³è¦å®‰è£…çš„åŒ…

```bash
$ npm install underscore
```

åœ¨package.jsonæ–‡ä»¶ä¸­æ ‡è¯†äº†æ¯ä¸ªä¾èµ–åŒ…çš„åå­—çš„ç‰ˆæœ¬

å½“è¿è¡Œäº†npm installï¼Œnpmä¼šä»æ³¨å†Œåº“ä¸­ä¸‹è½½ç»™å®šåç§°çš„åº“çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åä¼šå°†å®ƒä¿å­˜åœ¨ä¸€ä¸ªå«ğŸ“‚`node_modules` çš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯ä¸ªè¢«å®‰è£…çš„åŒ…ä¼šæœ‰è‡ªå·±çš„package.jsonæè¿°äº†è¿™ä¸ªåŒ…çš„åŸºæœ¬ä¿¡æ¯

## ä½¿ç”¨ä¸€ä¸ªåŒ…

åˆ›å»ºä¸€ä¸ªä¸`node_modules`æ–‡ä»¶å¤¹åŒçº§çš„index.jsæ–‡ä»¶ã€‚

```js
var us = require('underscore'); //åŠ è½½æ¨¡å—
```

å½“ä½ åœ¨requireæ–¹æ³•ä¼ å…¥äº†æ¨¡å—åï¼Œrequireè®¤ä¸ºä½ éœ€è¦ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œä½†åœ¨nodeä¸­æ²¡æœ‰ä¸€ä¸ªå«underscoreçš„å†…å»ºæ ¸å¿ƒæ¨¡å—ï¼Œç„¶årequireå‡½æ•°å°±ä¼šè®¤ä¸ºï¼Œä¹Ÿè®¸æœ‰å«è¿™ä¸ªåå­—çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚ä½†æ˜¯æˆ‘ä»¬æ—©å…ˆè¯´è¿‡ï¼Œå½“ä½ è¦å¼•ç”¨æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨  `./`   å¦‚æœå‚æ•°æ˜¯  `./underscore` requireä¼šè®¤ä¸ºåœ¨åŒç›®å½•ä¸­æœ‰ä¸€ä¸ªå« underscore.js çš„æ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯ï¼Œrequireä¼šè®¤ä¸ºæœ‰ä¸€ä¸ªå«underscoreçš„æ–‡ä»¶å¤¹é‡Œé¢æœ‰ä¸€ä¸ªindex.jsæ–‡ä»¶,å¾ˆæ˜¾ç„¶ä¹Ÿä¸æ˜¯ã€‚è¿™æ ·requireå°±ä¼šè®¤ä¸ºæœ‰ç¬¬ä¸‰ç§å¯èƒ½ï¼šå®ƒè®¤ä¸ºåœ¨ `node_modules` æ–‡ä»¶å¤¹ä¸­æœ‰ä¸ªå«underscoreçš„åº“ï¼Œè¿™å°±æ˜¯requireå‡½æ•°æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å—çš„è¿‡ç¨‹ã€‚é¦–å…ˆå®ƒå‡è®¾å‚æ•°åæ˜¯ä¸€ä¸ªnodeæ ¸å¿ƒæ¨¡å—ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå†ä¸ç„¶å®ƒå°±ä¼šåœ¨node_modulesæ–‡ä»¶å¤¹é‡Œæ‰¾å¯¹åº”çš„åº“ã€‚

å¥½ï¼Œç°åœ¨å·²ç»åŠ è½½æ¨¡å—äº†ï¼Œæˆ‘ä»¬è¯¥ä½¿ç”¨å®ƒäº†

```js
var result = us.contains([1 ,2 ,3],2);
console.log(result); 
```

```bash
$ node index.js
true
```

## Package Dependencies åŒ…çš„ä¾èµ–

```bash
$ npm i mongoose #æˆ‘ä»¬ç”¨å®ƒæ¥å‘MongoDBä¿å­˜æ•°æ®ï¼Œå°†åœ¨åé¢çš„è§†é¢‘ä»‹ç»
```

ä½ ä¼šå‘ç°`node_modules` æ–‡ä»¶å¤¹é‡Œä¸€ä¸‹å­å¤šå‡ºäº†å¥½å¤šæ–‡ä»¶å¤¹ï¼Œæ˜æ˜åªå®‰è£…äº†underscoreå’Œmongooseï¼Œè¿™é‡Œä½ çœ‹åˆ°çš„è¿™äº›å¤šå‡ºæ¥çš„åº“ï¼Œæ˜¯å…¶ä»–çš„nodeæ¨¡å—åŒ…å¹¶ä¸”æ˜¯mongooseæ¨¡å—ä¾èµ–çš„åº“

```bash
$ ls node_modules/
bl				ms
bluebird			process-nextick-args
bson				readable-stream
core-util-is			regexp-clone
debug				require_optional
denque				resolve-from
inherits			safe-buffer
isarray				saslprep
kareem				semver
memory-pager			sift
mongodb				sliced
mongoose			sparse-bitfield
mongoose-legacy-pluralize	string_decoder
mpath				underscore
mquery				util-deprecate
```

## NPM Package and SCM npmåŒ…ä¸æºä»£ç ç®¡ç†

https://www.bilibili.com/video/BV1kt411k7A3?p=26 å­¦ä¼šç”¨gitæ’é™¤`node_modules` æ–‡ä»¶å¤¹

## è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

SemVer è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œä»€ä¹ˆæ„æ€ï¼Ÿ åœ¨SVä¸­ï¼Œnpmæ‰€installçš„åŒ…çš„ç‰ˆæœ¬å·æœ‰3ä¸ªéƒ¨åˆ†ï¼šä¸»ç‰ˆæœ¬å·(æ–°å¢ç‰¹æ€§ç ´åäº†ç°æœ‰åº”ç”¨ä¸æœ¬åŒ…çš„ä¾èµ–å…³ç³»ï¼Œå°±å¢åŠ ä¸»ç‰ˆæœ¬å·).æ¬¡ç‰ˆæœ¬å·(æ·»åŠ æ–°ç‰¹æ€§,ä¸ä¼šç ´åç°æœ‰çš„api).è¡¥ä¸å·(æˆ–è¡¥ä¸æ›´æ–°ï¼Œç”¨æ¥è¡¨ç¤ºä¿®å¤çš„bug)

` ^ ` è¿™ä¸ªæ’å…¥ç¬¦å·å‘Šè¯‰npmåªè¦ä¸»ç‰ˆæœ¬å·æ˜¯è¿™ä¸ªï¼Œå…³å¿ƒæœ¬åŒ…çš„ä»»ä½•ç‰ˆæœ¬æ›´æ–°

`~` æ³¢æµªå·æ˜¯å‘Šè¯‰npm ä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å·æ˜¯è¿™ä¸ªï¼Œå…³å¿ƒæœ¬åŒ…çš„ä»»ä½•ç‰ˆæœ¬æ›´æ–°

è¿™ä¸¤ä¸ªç¬¦å·å¸®åŠ©ä½ ä¼´éšæœ€æ–°å‘å¸ƒçš„ä¾èµ–åº“è€Œä¿æŒåº”ç”¨ä¸ºæœ€æ–°ï¼Œä½†è¿™åŒæ ·ä¹Ÿä¼šå¸¦æ¥æ¥å£çš„å±é™©ï¼Œæ‰€ä»¥å°½é‡ä¸åŠ ã€‚

## åˆ—å‡ºå·²å®‰è£…çš„åŒ…

æƒ³æŸ¥çœ‹æ‰€æœ‰ä¾èµ–åº“çš„ç‰ˆæœ¬ ï¼Œè¿™ä¸ªæ ‘è¡¨ç¤ºäº†æ‰€æœ‰çš„ä¾èµ–å’Œå®ƒä»¬çš„ä¾èµ–

```bash
npm-demo$ npm list
npm-demo@1.0.0 /Users/mac/npm-demo
â”œâ”€â”¬ mongoose@5.9.9
â”‚ â”œâ”€â”€ bson@1.1.4
â”‚ â”œâ”€â”€ kareem@2.3.1
â”‚ â”œâ”€â”¬ mongodb@3.5.5
â”‚ â”‚ â”œâ”€â”¬ bl@2.2.0
â”‚ â”‚ â”‚ â”œâ”€â”¬ readable-stream@2.3.7
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ core-util-is@1.0.2
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ inherits@2.0.4
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ isarray@1.0.0
....
```

åªçœ‹è‡ªå·±çš„åº”ç”¨æ‰€éœ€çš„ä¾èµ–

```bash
npm-demo$ npm list --depth=0
npm-demo@1.0.0 /Users/mac/npm-demo
â”œâ”€â”€ mongoose@5.9.9
â””â”€â”€ underscore@1.10.2
```

## æŸ¥çœ‹åŒ…çš„æ³¨å†Œä¿¡æ¯ å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„åŒ…

https://www.bilibili.com/video/BV1kt411k7A3?p=29

https://www.bilibili.com/video/BV1kt411k7A3?p=30

## å‡çº§æœ¬åœ°åŒ…

https://www.bilibili.com/video/BV1kt411k7A3?p=31

å…¨å±€å®‰è£…æ–°çš„å‘½ä»¤è¡Œå·¥å…·sudo npm i -g npm-check-updates

## DevDependencies å¼€å‘ç”¨ä¾èµ–åº“

https://www.bilibili.com/video/BV1kt411k7A3?p=32

## åˆ›å»ºè‡ªå·±çš„åŒ…å¹¶å‘å¸ƒåˆ°npmæ³¨å†Œåº“

https://www.bilibili.com/video/BV1kt411k7A3?p=35

## å‘å¸ƒåŒ…æ›´æ–°

https://www.bilibili.com/video/BV1kt411k7A3?p=36
